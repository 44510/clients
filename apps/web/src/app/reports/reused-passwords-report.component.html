<div class="page-header">
  <h1>
    {{ "reusedPasswordsReport" | i18n }}
    <small *ngIf="loading">
      <i
        class="bwi bwi-spinner bwi-spin text-muted"
        title="{{ 'loading' | i18n }}"
        aria-hidden="true"
      ></i>
      <span class="sr-only">{{ "loading" | i18n }}</span>
    </small>
  </h1>
</div>

<p>{{ "reusedPasswordsReportDesc" | i18n }}</p>

<div *ngIf="loading">
  <i
    class="bwi bwi-spinner bwi-spin text-muted"
    title="{{ 'loading' | i18n }}"
    aria-hidden="true"
  ></i>
  <span class="sr-only">{{ "loading" | i18n }}</span>
</div>

<div class="mt-4" *ngIf="!loading">
  <app-callout type="success" title="{{ 'goodNews' | i18n }}" *ngIf="!(ciphers | async)?.length">
    {{ "noReusedPasswords" | i18n }}
  </app-callout>

  <ng-container *ngIf="(ciphers | async)?.length">
    <app-callout type="danger" title="{{ 'reusedPasswordsFound' | i18n }}">
      {{ "reusedPasswordsFoundDesc" | i18n: ((ciphers | async)?.length | number) }}
    </app-callout>

    <app-reports-result-list [ciphers]="ciphers | async" (onCipherChange)="load()">
      <ng-template let-c>
        <span bitBadge badgeType="warning">
          {{ "reusedXTimes" | i18n: passwordUseMap.get(c.login.password) }}
        </span>
      </ng-template>
    </app-reports-result-list>
  </ng-container>
</div>
